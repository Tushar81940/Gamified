<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gamified • Game Details</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
    <script src="data.js"></script>
    <script defer src="theme.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="branding">
          <a href="index.html" style="text-decoration:none;color:inherit;display:flex;align-items:center;gap:10px">
            <img class="logo" src="assets/logo.svg" alt="Gamified" onerror="this.style.display='none'" />
            <span class="brand-text">Gamified</span>
          </a>
        </div>
        <nav class="actions">
          <a class="cart-button" href="index.html">← Back to Store</a>
          <button class="cart-button theme-toggle" type="button">Light Mode</button>
        </nav>
      </div>
    </header>

    <main class="container" style="padding:24px 0;">
      <section id="gameDetail" class="card" style="display:grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <div>
          <img id="detailImage" src="" alt="" style="width:100%; height:100%; object-fit:cover;" />
        </div>
        <div class="card-body" style="padding:20px;">
          <h1 id="detailTitle" style="margin-top:0;"></h1>
          <p id="detailGenre" class="muted"></p>
          <h2 id="detailPrice" style="margin:12px 0 18px 0;"></h2>
          <div style="display:flex; gap:10px;">
            <button id="detailAdd" class="add-to-cart">Add to Cart</button>
            <button id="detailBuy" class="buy-now">Buy Now</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© <span id="year"></span> Gamified. All rights reserved.</p>
        <nav class="footer-links">
          <a href="#">Terms</a>
          <a href="#">Privacy</a>
          <a href="#">Support</a>
        </nav>
      </div>
    </footer>

    <script>
      (function () {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const yearEl = document.getElementById('year');
        if (yearEl) yearEl.textContent = String(new Date().getFullYear());

        // Use window.GAMES and INR helpers from index page conventions
        const conversionRateUsdToInr = 83;
        const inrFormatter = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR' });
        const toInr = (usd) => usd * conversionRateUsdToInr;
        const fmt = (inr) => inrFormatter.format(inr);

        const game = (window.GAMES || []).find((g) => g.id === id) || (window.GAMES || [])[0];
        if (!game) return;

        const titleEl = document.getElementById('detailTitle');
        const genreEl = document.getElementById('detailGenre');
        const priceEl = document.getElementById('detailPrice');
        const imgEl = document.getElementById('detailImage');
        const addBtn = document.getElementById('detailAdd');
        const buyBtn = document.getElementById('detailBuy');

        titleEl.textContent = game.title;
        genreEl.textContent = game.genre.toUpperCase();
        priceEl.textContent = fmt(toInr(game.priceUsd));
        imgEl.src = game.image; imgEl.alt = game.title;

        addBtn.addEventListener('click', () => {
          // Keep minimal cart behavior on detail page via localStorage
          const raw = localStorage.getItem('gamified-cart');
          const cart = raw ? JSON.parse(raw) : {};
          cart[game.id] = (cart[game.id] || 0) + 1;
          localStorage.setItem('gamified-cart', JSON.stringify(cart));
          alert('Added to cart!');
        });

        buyBtn.addEventListener('click', () => {
          alert(`Buying: ${game.title} — ${fmt(toInr(game.priceUsd))}`);
        });
      })();
    </script>
  </body>
  </html>


